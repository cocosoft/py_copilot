<!DOCTYPE html>
<html>
<body>
<h2>API测试</h2>
<button onclick="testApi()">测试suppliers-list API</button>
<div id="result"></div>

<script>
async function testApi() {
  const resultDiv = document.getElementById('result');
  resultDiv.innerHTML = '正在测试...';
  
  try {
    // 测试相对路径（通过Vite代理）
    const response = await fetch('/api/v1/suppliers-list', {
      method: 'GET',
      credentials: 'include'
    });
    
    console.log('响应状态:', response.status);
    console.log('响应头:', response.headers);
    
    let data;
    try {
      data = await response.json();
      console.log('响应数据:', data);
    } catch (jsonError) {
      data = await response.text();
      console.log('响应文本:', data);
    }
    
    if (!response.ok) {
      throw new Error(`HTTP错误! 状态码: ${response.status}`);
    }
    
    resultDiv.innerHTML = `<h3>成功!</h3><pre>${JSON.stringify(data, null, 2)}</pre>`;
  } catch (error) {
    console.error('请求失败:', error);
    resultDiv.innerHTML = `<h3>失败!</h3><p>${error.message}</p><pre>${error.stack}</pre>`;
  }
}
</script>
</body>
</html>